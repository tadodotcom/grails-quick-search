<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>Quick Search Plugin 0.3</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass(el) {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">

<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/quickSearchService.html"><strong>2</strong><span>Quick Search Service</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/configuration.html"><strong>3</strong><span>Configuration</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p>
Search plugin for domain class properties. Lightweight plugin which puts the ability for searching, it adds utility
functions for building the search result into a string format representation sufficient for auto-complete as well as
functions for listing the results based on the search query.
</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="reference corner-all">

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                <h1>search()</h1><p class="paragraph"/><h2>Purpose</h2>
Executes the search based on given query and properties which should be searched.<p class="paragraph"/><h2>Examples</h2>
<div class="code"><pre>def searchParams = &#91;sort: 'address.street', order: 'asc', max: 10, offset: 0&#93;
def searchProperties = &#91;name: <span class="java&#45;quote">"address.name"</span>, addressLine1: <span class="java&#45;quote">"address.addressLine1"</span>, addressLine2: <span class="java&#45;quote">"address.addressLine2"</span>,
   zipCode: <span class="java&#45;quote">"address.zipCode"</span>, city: <span class="java&#45;quote">"address.city"</span>, country: <span class="java&#45;quote">"address.country"</span>, landlord: 'landlord.lastName'&#93;
def homeList = quickSearchService.search(domainClass: Home, searchParams: searchParams,
   searchProperties: searchProperties, query: <span class="java&#45;quote">"Lindwurmstr. 76"</span>)</pre></div><p class="paragraph"/><h2>Description</h2>
Parameters:
<ul class="star">
<li><code>domainClass</code> &#91;Class&#93; (required) - Domain class which should be used for search.</li>
<li><code>query</code> &#91;String&#93; (required) - The actual query which should be searched.</li>
<li><code>searchParams</code> &#91;Map&#93; (optional) - Map of params for sort, order, max, offset, etc. Sort attribute supports nested sorting, i.e. 'home.person.name'. The map can contain also distinct key with value of property which should be distinct. This is applicable for searching in nested queries during auto-complete where the user is interested in one distinct value, distinct: 'home.person.name'. Beware that using the distinct returns list of distinct values not domain objects.</li>
<li><code>searchProperties</code>Â &#91;Map&#93; (optional) - Persistent properties which should be used for the actual query. Key of the map is any unique key and value is a string representation of the property, nesting is also supported, i.e. personName: 'home.person.name'. If searchProperties are not defined, all String and number persistent properties of the domain class is taken into account.</li>
<li><code>customCriteria</code> &#91;Closure&#93; (optional) - Create criteria closure which is injected into the search query. This closure is put into the and{...} statement. List of all created aliases (build during the nesting) is passed back to the closure and therefore could be leveraged.</li>
<li><code>tokens</code> &#91;List&#93; (optional) - List of tokens which should be used for tokenizing given query string. If not set, the default config value is used.</li>
<li><code>tokenizeNumbers</code> &#91;Boolean&#93; (optional) - Specifies if the query should be split for numbers and other characters. If not set, the default config value is used.</li>
</ul><p class="paragraph"/>Returns:<p class="paragraph"/>Result list <a href="http://grails.org/doc/latest/api/grails/orm/PagedResultList.html" target="blank">PagedResultList</a> which has a getTotalCount() method to return the total number of matching records for pagination.<p class="paragraph"/>Association properties:<p class="paragraph"/>SearchParams as well as searchProperites allows to set association (nested) properties, i.e. "home.person.name". It supports domain class association as well as embedded classes. The hibernate LEFT JOIN is used for association in order to allow the search of properties which has their association empty, i.e. homes without a person.<p class="paragraph"/><h1>searchAutoComplete()</h1><p class="paragraph"/><h2>Purpose</h2>
Executes the search based on given query and properties which should be searched. In addition it transforms the result into a list of strings based on given template string.<p class="paragraph"/><h2>Examples</h2>
simple example of autocomplete:
<div class="code"><pre>def searchParams = &#91;sort: 'address.street', order: 'asc', max: 10, offset: 0&#93;
def searchProperties = &#91;name: <span class="java&#45;quote">"address.name"</span>, addressLine1: <span class="java&#45;quote">"address.addressLine1"</span>, addressLine2: <span class="java&#45;quote">"address.addressLine2"</span>,
   zipCode: <span class="java&#45;quote">"address.zipCode"</span>, city: <span class="java&#45;quote">"address.city"</span>, country: <span class="java&#45;quote">"address.country"</span>, landlordName: 'landlord.lastName'&#93;
def autocompleteTemplate = '$&#123;name&#125;, $&#123;city&#125; ($&#123;landlordName&#125;)'
def homeList = quickSearchService.searchAutoComplete(domainClass: Home, searchParams: searchParams,
   searchProperties: searchProperties, autocompleteTemplate: autocompleteTemplate, query: <span class="java&#45;quote">"Lindwurmstr. 76"</span>)</pre></div><p class="paragraph"/>Example which uses matchResults property for autocomplete template:
<div class="code"><pre>def searchParams = &#91;sort: 'address.street', order: 'asc', max: 10, offset: 0&#93;
def searchProperties = &#91;name: <span class="java&#45;quote">"address.name"</span>, addressLine1: <span class="java&#45;quote">"address.addressLine1"</span>, addressLine2: <span class="java&#45;quote">"address.addressLine2"</span>,
   zipCode: <span class="java&#45;quote">"address.zipCode"</span>, city: <span class="java&#45;quote">"address.city"</span>, country: <span class="java&#45;quote">"address.country"</span>, landlordName: 'landlord.lastName'&#93;
def autocompleteTemplate = '$&#123;name ? name : <span class="java&#45;quote">""</span>&#125;$&#123;city ? <span class="java&#45;quote">", "</span> + city : <span class="java&#45;quote">""</span>&#125;$&#123;country ? <span class="java&#45;quote">", "</span> + country: <span class="java&#45;quote">""</span>&#125;' +
                                 ' $&#123;(matchResults.findAll&#123;!&#91;<span class="java&#45;quote">"name"</span>, <span class="java&#45;quote">"city"</span>, <span class="java&#45;quote">"country"</span>&#93;.contains(it.key)&#125;.values())&#125;'
def homeList = quickSearchService.searchAutoComplete(domainClass: Home, searchParams: searchParams,
   searchProperties: searchProperties, autocompleteTemplate: autocompleteTemplate, query: <span class="java&#45;quote">"Lindwurmstr. 76"</span>)</pre></div><p class="paragraph"/><h2>Description</h2>
Parameters:
<ul class="star">
<li><code>autocompleteTemplate</code> &#91;String&#93; (optional) - <a href="http://groovy.codehaus.org/Strings+and+GString" target="blank">GString</a> representation of final item. The dollar values should use the keys specified in searchProperties if given or domain class property names. Additionally, it can use matchResults map which contains all properties which match the actual search. The map key is taken from searchProperties attribute and the value is the actual value of the object (see example above). If this attribute is not specified, it uses toString() method of the domain class. If the searchParams attribute sets a distinct property the autocompleteTemplate is neglected because the distinct properties are returned instead.</li>
</ul><p class="paragraph"/>The searchAutoComplete() methods leverages the search() method therefore additionally to parameters described above you should use the parameters from the leveraged method.<p class="paragraph"/>Returns:<p class="paragraph"/>List of Maps with structure of &#91;id: domainClassId, label: autocompleteTemplateResult&#93;. The id attribute could be null when the distinct attribute of searchParams is given.
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block">
                        <h1 class="menu-title" onclick="toggleRef(nextElement(this))">Services</h1>
                        <div class="menu-sub selected">
                            
                            
                            <div class="menu-item"><a href="../../ref/Services/searchService.html">searchService</a>
                            </div>
                            
                        </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>


<script type="text/javascript" src="../../js/docs.js"></script>

</body>
</html>
